extends layout 
block content
    main.content
        nav.navbar.navbar-expand-lg.shadow.p-2.mb-3.bg-white.bottom-shadow
            .container-fluid
                a.navbar-brand.text-dark(href='#' style= 'margin-right:70%') Welcome Back
                button.navbar-toggler(type='button' data-bs-toggle='collapse' data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false' aria-label='Toggle navigation')
                    span.navbar-toggler-icon
                #navbarSupportedContent.collapse.navbar-collapse
                    ul.navbar-nav.me-auto.mb-2.mb-lg-0.ml-auto
                        li.nav-item.dropdown(style='margin-left: auto')
                            a.nav-link.dropdown-toggle.text-secondary(href='#' role='button' data-bs-toggle='dropdown' aria-expanded='false') #{loggedUser.firstname +" "+loggedUser.lastname}
                            ul.dropdown-menu
                                li
                                    a.dropdown-item(href='#') Profile
                                li
                                    a.dropdown-item(href='#')
                                li
                                    form(method="POST" action='/logout')
                                        button.btn(type= 'submit' width='100px') Signout
        #stat-container.container-fluid
            .card.bottom-shadow.border-color.mr-3.ml-4.dashboard-card
                .card-body.m-1.p-2.pt-1.text-center
                    p.card-text.p-0.m-2.text-muted(style='font-size:20px;font-weight: bold;') Produce Statistics
                    img.card-logo.mb-2(src='../images/farm.png' alt='Ufarm logo')
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Approved:
                        if (approved == undefined)
                            p 0
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{approved.totalQuantity}
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Pending:
                        if (pending == undefined)
                            p 0
                            
                        else 
                            h5.card-title.text-muted.text-center.mt-0.pt-1.pl-4.card-total-font #{pending.totalQuantity}
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Sold:
                        if (sold == undefined)
                            p 0
                            
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{sold.totalQuantity} 
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Total Produce:
                        if (totalProduce == NaN)
                            p 0
                            
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{totalProduce}
            .card.bottom-shadow.border-color.ml-4.dashboard-card
                .card-body.m-1.p-2.pt-1.text-center
                    p.card-text.p-0.m-2.text-muted(style='font-size:20px;font-weight: bold;') Projected Sales Count
                    img.card-logo.mb-2(src='../images/farm.png' alt='Ufarm logo')
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Approved:
                        if (approved == undefined)
                            p 0
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{new Intl.NumberFormat().format(approved.totalCost)} UGX
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Pending:
                        if (pending == undefined)
                            p 0
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.pl-4.card-total-font #{new Intl.NumberFormat().format(pending.totalCost)} UGX
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Sold:
                        if (sold == undefined)
                            p 0
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{new Intl.NumberFormat().format(sold.totalCost)} UGX
                    div.d-flex
                        p.card-text.text-muted.mb-0.card-font Total Sale: 
                        if (totalSales == NaN)
                            p 0
                        else
                            h5.card-title.text-muted.text-center.mt-0.pt-1.card-total-font #{new Intl.NumberFormat().format(totalSales)} UGX
            .card.bottom-shadow.border-color.ml-4.dashboard-card
                .card-body.m-1.p-2.pt-1.text-center
                    h5.card-title.text-muted.text-center.mt-0.pt-0(style='font-weight: bold') 980
                    p.card-text.p-0.m-0.text-muted(style='font-size: 15px') Produce sold
            .card.bottom-shadow.border-color.ml-4.dashboard-card
                .card-body.m-1.p-2.pt-1.text-center
                    h5.card-title.text-muted.text-center.mt-0.pt-0(style='font-weight: bold') 60
                    p.card-text.p-0.m-0.text-muted(style='font-size: 15px') Produce Rejected
        .container-fluid.stast-grid.mt-5
            .card(style='width: 260px; height: 300px')
                | .
                h6.card-subtitle.mb-0.text-muted.text-center(style='font-size: large') Sold Produce in %
                .card-body
                    .month-container.mb-4(style='margin-left: 12px;')
                        .d-flex.mr-2
                            .box(style='background-color: #fda500; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') July
                        .d-flex.mr-2
                            .box(style='background-color: #dc143b;margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Aug
                        .d-flex.mr-2
                            .box(style='background-color: #77cc6d; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Sept
                        .d-flex.mr-2
                            .box(style='background-color: #3fe0d0; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Oct
                    .chart
            .card(style='width: 260px; height: 300px')
                | .
                h6.card-subtitle.mb-0.text-muted.text-center(style='font-size: large') Produce Uploaded in %
                .card-body
                    .month-container.mb-4(style='margin-left: 12px;')
                        .d-flex.mr-2
                            .box(style='background-color: #fda500; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') July
                        .d-flex.mr-2
                            .box(style='background-color: #dc143b;margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Aug
                        .d-flex.mr-2
                            .box(style='background-color: #77cc6d; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Sept
                        .d-flex.mr-2
                            .box(style='background-color: #3fe0d0; margin-right: 5px')
                            strong(style='font-size: 12px; margin-right: 10px') Oct
                    .chart2
            .container
                .card.mt-0.ml-0(style='width: 480px; height: 680px')
                    .card-body
                        h5.card-title List of Recently Approved Produce
                        | 									.
                        table.table.table-hover
                            thead
                                tr
                                    th(scope='col') No
                                    th(scope='col') Produce Name
                                    th(scope='col') Quantity
                                    th(scope='col') Unit Price
                                    th(scope='col') Status
                            tbody
                                if approvedList.length
                                    each item in approvedList
                                        tr
                                            th(scope='row') 1
                                            td #{item.producename}
                                            td #{item.quantity+" "+item.units}
                                            td #{item.unitprice}
                                            td.approved #{item.status}
            .container
                .card.mt-5.ml-0(style='width: 530px; height: 330px')
                    .card-body
                        h5.card-title New Incoming Orders
                        table.table.table-hover
                            thead
                                tr
                                    th(scope='col') No.
                                    th(scope='col') Produce
                                    th(scope='col') Quantity
                                    th(scope='col') Amount
                                    th(scope='col') Status
                            tbody
                                if newOrders 
                                    each order in newOrders
                                        tr
                                            th(scope='row') 1
                                            td #{order.producename}
                                            td #{order.orderquantity+""+order.units}
                                            td shs #{order.unitprice * order.orderquantity}
                                            td.pending #{order.status}
        .footer
            small.mt-4.ml-5 © Refactory Cohort 12
            small.mt-4.mr-5 © Designed By Fauzia | fauzianaava@gmail.com | 0704545576
